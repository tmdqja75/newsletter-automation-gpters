# [Claude Code] deepagents로 AI 뉴스레터 작성 시스템 구축한 후기

## 📝 한줄 요약
매주 AI 뉴스레터를 쓰는 게 부담이었는데, Claude Code와 deepagents로 리서치부터 글쓰기까지 자동화하는 에이전트를 만들어봤습니다. (아직 진행 중!)

## 🎯 이런 분들께 도움돼요
- 정기적으로 뉴스레터나 콘텐츠를 발행하는 크리에이터
- AI 에이전트 프레임워크(deepagents, LangGraph)를 써보고 싶은 개발자
- Claude Code로 실제 프로젝트를 만들어보고 싶은 분
- "AI로 뭘 자동화할 수 있을까?" 고민하는 분

## 😫 문제 상황 (Before)

저는 매주 수요일 "오토마타"라는 AI 뉴스레터를 발행하고 있어요. LLM과 AI 에이전트 관련 소식을 정리해서 구독자들에게 전달하는 건데, 이게 생각보다 손이 많이 가더라고요.

**기존에 겪던 불편함:**
- **리서치에 시간이 너무 오래 걸림**: 매주 AI 뉴스를 찾고, 읽고, 정리하는 데만 몇 시간씩 소요
- **글쓰기 자체가 부담**: 토픽은 있는데 아티클로 풀어쓰는 게 힘들었음
- **일정 유지가 어려움**: 바쁜 주에는 뉴스레터 발행이 밀리기 일쑤
- **클로드, 챗지피티의 어색한 톤**: 부자연스러운 톤앤 매너

그래서 파이선 코드로 저만ㅇ 에이저트르 LangChain에서 새로 나온 `deepagents` 패키지를 알게 됐어요. Claude Code처럼 복잡한 작업을 처리하는 에이전트를 만들 수 있다길래, "이걸로 뉴스레터 작성을 자동화할 수 있지 않을까?" 싶었죠.

## 🛠️ 사용한 도구
- **Claude Code**: 전체 개발 과정 협업
- **모델**: Claude Opus 4.5
- **주요 패키지**: deepagents (LangGraph 기반), Tavily API (웹 검색)

---

## 🔧 작업 과정

### deepagents가 뭔지부터 파악하기

deepagents는 나온 지 얼마 안 된 패키지라 정보가 많지 않았어요. Claude Code한테 조사를 부탁했죠.

> deepagents 패키지에 대해 조사해줘. 공식 문서랑 GitHub 예제 코드 찾아서 어떻게 사용하는지 알려줘.

Claude가 웹 검색으로 공식 문서, GitHub README, 튜토리얼 블로그까지 찾아서 정리해줬어요. `create_deep_agent()` 함수 사용법, subagent 정의 방법, middleware 아키텍처까지. 새로운 패키지인데도 사용법을 빠르게 파악할 수 있었어요.

---

### 기존 뉴스레터 톤앤매너 분석

에이전트가 글을 쓰려면 "어떤 스타일로 쓸지"를 알아야 하잖아요. 제가 기존에 발행한 뉴스레터 URL을 줬더니 톤앤매너를 분석해줬어요.

> 이 URL이 기존 뉴스레터야. 톤앤매너를 분석해줘.
> https://maily.so/automata/posts/l1zqg24lr5x

Claude가 분석한 결과:
- 친근한 해요체 사용
- 기술 용어는 한국어와 영어 병기 (예: "에이전트 하니스(Agent Harness)")
- 비유를 활용해서 어려운 개념 설명
- 섹션당 400-600 단어

이 분석 결과를 바탕으로 Tone Agent의 시스템 프롬프트를 만들었어요.

---

### 멀티 에이전트 아키텍처 설계

뉴스레터 작성 과정을 여러 에이전트로 나눴어요:

1. **Research Agent**: Tavily API로 최신 AI 뉴스 검색
2. **Topic Selection Agent**: 수집된 뉴스 중 뉴스레터에 실을 토픽 선정
3. **Tone Agent**: 작성된 아티클을 오토마타 스타일로 교정
4. **Main Orchestrator**: 전체 워크플로우 조율

> 이 에이전트 구조로 구현 계획을 세워줘.

Claude가 상세한 구현 계획서를 작성해줬어요. 디렉토리 구조, 각 에이전트의 역할, 워크플로우까지 정리된 문서가 나왔죠.

---

### 프로젝트 환경 설정부터 코드 구현까지

계획이 정리되니까 구현은 빠르게 진행됐어요.

> poetry 대신 uv를 사용해서 프로젝트 세팅해줘

`pyproject.toml`, `.env.example`, `.gitignore`, `README.md`가 순식간에 만들어졌고, 이어서 에이전트 코드까지 구현됐어요:

- `src/config.py` - 설정 및 프롬프트
- `src/agents/` - 서브에이전트 정의
- `src/tools/` - Tavily 검색 도구
- `src/main.py` - 메인 오케스트레이터
- `run.py` - CLI 실행 파일

---

### 에러 디버깅 - 에이전트가 멈추는 문제

코드가 완성된 줄 알았는데, 실행하니까 문제가 생겼어요.

> run.py 실행하면 이렇게 출력되고 무한 대기 상태로 멈춰. 원인 찾아서 해결해줘.
> 🚀 오토마타 뉴스레터 생성 시작
> 📅 발행 예정일: 2026-01-21

Claude가 코드를 분석해서 deepagents 스트리밍 로직의 문제를 찾아냈어요. 진행 상황 출력 메시지를 추가하고 `sys.stdout.flush()`로 실시간 출력을 보장하도록 수정했죠.

에러 메시지만 주면 원인을 추적해서 해결해주니까 디버깅 시간이 확 줄었어요.

---

### 실제 뉴스레터 생성 테스트

수정 후 다시 실행하니까 드디어 뉴스레터가 생성됐어요!

4개 아티클이 자동으로 만들어졌죠:
- DeepSeek V3.2-V4 소식
- 멀티 에이전트 시스템 트렌드
- Test-Time Reasoning 패러다임
- 오토마타 스터디 카페 (오픈소스 코딩 에이전트 추천)

각 아티클이 마크다운 파일로 저장되고, 최종 병합된 `newsletter.md`까지 생성됐어요.

---

## ✅ 결과 (After)

### 현재 상태
| 항목 | 상태 |
|------|------|
| 에이전트 구현 | 완료 |
| 뉴스레터 생성 | 테스트 성공 |
| 실제 적용 | 아직 테스트 단계 |

### 남은 과제
- **리서치 에이전트 개선 필요**: 아직 최신 데이터를 잘 못 가져오는 이슈가 있어요
- **Human-in-the-Loop 활성화**: 토픽 선정 시 사람 승인 기능 적용 예정
- **실제 뉴스레터에 적용**: 테스트 후 실제 발행에 활용할 계획

솔직히 아직 "완성"은 아니에요. 하지만 한 시간 만에 동작하는 프로토타입이 나왔다는 게 신기했어요.

---

## 💬 이 과정에서 배운 AI 활용 팁

### 효과적이었던 것

1. **새로운 패키지도 Claude가 조사해준다**
   - deepagents처럼 문서가 적은 새 패키지도 웹 검색으로 사용법을 파악해줌
   - 공식 문서, GitHub 예제, 튜토리얼까지 종합해서 정리

2. **기존 콘텐츠 URL 주면 스타일 분석이 가능하다**
   - 뉴스레터 URL만 줬는데 톤앤매너, 구조, 길이까지 분석
   - 이걸 바탕으로 에이전트 프롬프트 작성

3. **에러도 같이 해결할 수 있다**
   - 에러 메시지만 주면 원인 추적 + 해결까지
   - 디버깅 시간 대폭 단축

4. **계획부터 구현까지 함께**
   - "아이디어만 있는데 어떻게 만들지?"부터 시작해도 됨
   - 계획서 작성 → 환경 설정 → 코드 구현까지 한 흐름으로

### 이렇게 하면 안 돼요

1. **처음부터 완벽한 결과를 기대하지 말 것**
   - AI가 만든 코드도 버그가 있을 수 있음
   - 테스트하고 피드백하는 과정이 필요

2. **맥락 없이 요청하지 말 것**
   - "뉴스레터 만들어줘"보다 "이런 구조의 뉴스레터를 이런 방식으로 자동화하고 싶어"가 훨씬 효과적

---

## 🌍 다른 업무에 적용한다면?

이번 경험을 다른 상황에 적용할 수 있는 아이디어:

- **블로그 포스트 자동화**: 특정 주제 리서치 → 아웃라인 작성 → 초안 생성
- **리포트 자동화**: 데이터 수집 → 분석 → 보고서 형식으로 정리
- **SNS 콘텐츠 생성**: 트렌드 모니터링 → 콘텐츠 아이디어 → 초안 작성

핵심은 "반복적이고 구조화된 작업"을 에이전트로 자동화하는 거예요.

---

## 🚀 앞으로의 계획

1. **리서치 에이전트 개선**: 최신 데이터를 잘 가져오도록 검색 로직 수정
2. **Human-in-the-Loop 활성화**: 토픽 선정 단계에서 사람이 검토/승인하는 기능 적용
3. **실제 뉴스레터 발행에 적용**: 테스트가 끝나면 실제 "오토마타" 뉴스레터 작성에 활용

아직 갈 길이 남았지만, "AI로 콘텐츠 작성을 자동화할 수 있다"는 가능성을 확인한 것만으로도 의미 있는 경험이었어요.

---

## 📋 재사용 가능한 프롬프트

### 프롬프트 1: 새로운 패키지 조사하기
> [패키지명] 패키지에 대해 조사해줘. 공식 문서, GitHub README, 사용 예제를 찾아서 어떻게 사용하는지 정리해줘.

### 프롬프트 2: 기존 콘텐츠 톤앤매너 분석
> 이 URL이 내가 쓴 기존 콘텐츠야. 톤앤매너(문체, 구조, 길이 등)를 분석해줘.
> [URL]

### 프롬프트 3: 에이전트 아키텍처 설계
> [작업 설명]을 자동화하는 멀티 에이전트 시스템을 설계해줘. 각 에이전트의 역할, 워크플로우, 디렉토리 구조를 포함해서.

### 프롬프트 4: 실행 오류 디버깅
> [파일명] 실행하면 [에러 상황 설명]. 원인을 찾아서 해결해줘.
